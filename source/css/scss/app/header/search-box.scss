$search-form-width: 10.4rem;
$search-form-height: $header-height;
$search-form-height-small: $header-height-small;
$search-form-transition: width 0.5s ease;

$search-margin: 0.6rem;
$search-margin-small: 0.4rem;
$search-centering-margin: 0.65rem;
$search-centering-margin-small: 0.32rem;
$search-button-size-small: 2.5rem;
$search-icon-size: $top-nav-font-size;

$search-input-width-small: calc(100% - #{$search-margin-small + $search-button-size-small} );
$search-input-width: $search-form-width - $search-margin;
$search-input-padding: $search-margin;
$search-input-padding-small: $search-margin-small;

// annoyingly long selector to override
.row > .columns > a.header-button#search-toggle {
    border-right: none;

    &[aria-expanded="true"] .search-icon {
        display: none;
    }

    &[aria-expanded="false"] .close-icon {
        display: none;
    }
}

.search-button-container {
    width: grid-calc(1, 8);
}

.search-container {
    position: absolute;
    z-index: 1;
}

#search-form {
    display: block;
    position: absolute;
    overflow: hidden;
    width: 100%;
    border-right: rem-calc(1) solid $kiva-navdivider-green;
    background-color: $kiva-green;

    -webkit-transition: $search-form-transition;
    -moz-transition: $search-form-transition;
    -o-transition: $search-form-transition;
    transition: $search-form-transition;

    &[aria-hidden="true"] {
        width: 0;
    }

    div {
        position: relative;
        vertical-align: middle;
        height: $search-form-height-small;
    }

    .search-icon {
        position: absolute;
        left: 0.4rem + $search-button-size-small;
        top:50%;

        &:before {
            position: absolute;
            top: -$search-icon-size/2;
        }
    }

    input {
        $search-input-padding: 0.6rem;
        width: $search-input-width-small;
        padding: $search-input-padding-small $search-input-padding-small $search-input-padding-small ($top-nav-font-size * 1.5);
        margin: $search-centering-margin-small 0;
        display: inline-block;
        height: auto;
    }
}

#close-search {
    float: left;
    width: $search-button-size-small;
    line-height: $search-form-height-small;
    text-align: center;
    color: $kiva-darkgreen;
}

@media #{$large-up} {
    .search-button-container {
        width: auto;
    }

    .search-container {
        position: static;
    }

    #search-form {
        width: $search-form-width;

        div {
            height: $search-form-height;
        }

        input {
            width: $search-input-width;
            margin: $search-centering-margin 0;
            padding: $search-input-padding $search-input-padding $search-input-padding ($top-nav-font-size * 1.5);
        }

        .search-icon {
            left: 0.4rem;
        }
    }
}